# 推理技术

## 推理的概念

> 按照某种策略从已知事实出发去推出结论的过程。

### 推理所用的事实：

- 初始证据：推理前用户提供的
- 中间结论：推理过程中所得到的

### 推理过程：由推理机来完成，所谓推理机就是智能系统中用来实现推理的那些程序。

### 推理的两个基本问题

- 推理的方法：解决前提和结论的逻辑关系，不确定性传递
- 推理的控制策略：解决推理方向，冲突消解策略

### 按推理的逻辑基础分类

- 演绎推理，演绎推理是在已知领域内的一般性知识的前提下，通过演绎求解一个具体问题或者证明一个结论的正确性，这个结论蕴含在前提之中,故不能产生新知识

- 归纳推理，归纳推理所推出的结论是没有包含在前提内容中的。这种由个别事物或现象推出一般性知识的过程，是增殖新知识的过程。

## 消解原理（归结原理）

> 基本的出发点：要证明一个命题为真都可以通过证明其否命题为假来得到,将多样的推理规则简化为一个，即为消解。

### 条件

- 消解只能在仅含否定和析取联接词的公式（子句）间进行
- 必须先把公式化成规范的形式（范式，子句集）

如果今天不下雨，我就去你家 : ~P→Q <=> P V Q
今天没有下雨 : ~P
结论 : Q

消解：对谓词演算公式进行分解和化简，消去一些符号，以求得导出子句

**两种消解方法:**

- 命题逻辑的消解方法
- 一阶谓词逻辑的消解方法

### 概念：

1. 文字：原子公式及其否定统称为文字
2. 子句集

### 子句定义

1. 任何文字的析取式称为子句
2. 不包含任何文字的子句称为空子句（空子句是永假的）
3. 由子句构成的集合称为子句集

### 谓词演算公式化为子句式的步骤：

1. 消去蕴含
2. 非号內移
3. 变量标准化，使不同作用域内的变量名不相同
4. 消去存在量词,两种情况，一是存在量词在全称量词的作用域外，直接换为个体常量即可；二是存在量词在全称量词的作用域内，使用一个Skolen函数替换 ，意思就是把存在量词的变量换成全称量词的变量的函数表示
5. 化为前束范式，全称提前到整个表达式外
6. 把母式化为合取范式
7. 消去全称量词
8. 消去连词符号∧，写成子句集
9. 变量分离标准化

#### 命题逻辑的消解式

子句      C1=P∨C1'   C2=~P∨C2'

消解式   C12=C1'∨C2'

#### 一阶谓词逻辑的消解式

设C1与C2是两个没有相同变元的子句，L1和L2分别是C1和C2中的文字，若σ是L1和~L2的mgu，则称

C12=(C1σ - {L1σ})∪(C2σ - {L2σ})

为C1和C2的二元消解式，L1和L2为消解式上的文字

### 消解规则

- 没有互补对的子句没有消解式
- 一次只能消去一对互补对
- 要把消解推理规则推广到含有变量的子句，必须找到一个作用于父辈子句的置换，使父辈子句含有互补文字。

### 消解反演

1. 给出{S}，L，S是谓词逻辑公式，L是结论
2. 否定L，得~L；
3. 把~L添加到S中去；
4. 把新产生的集合｛~L，S｝化成子句集；
5. 应用消解原理，力图推导出一个表示矛盾的空子句

### 消解反演的实质

1. 从子句集中不断推导出消解式，直至得到空子句.
2. 子句集中子句之间是合取关系，一个子句不满足，子句集就不满足.
3. 空子句是不满足的，若子句集中包含空子句，该子句集便不可满足。
4. 鲁滨逊归结原理基本思想：检查子句集S中是否包含空子句，若包含，S不可满足；若否，在子句集中选择合适的子句进行消解，直至导出空子句或不能继续归结为止。

### 反演求解过程(回答问题)

**从反演树求取答案步骤**

1. 把问题的已知条件用谓词公式表示出来，并化为相应的子句集；
2. 把问题的目标的否定用谓词公式表示出来，并化为子句集；
3. 对目标否定子句集中的每个子句，构造该子句的重言式（即把该目标否定子句和此目标否定子句的否定之间再进行析取所得到的子句），用这些重言式代替相应的目标否定子句式，并把这些重言式加入到前提子句集中，得到一个新的子句集；
4. 对这个新的子句集，应用消解原理求出其证明树，这时证明树的根子句不为空，称这个证明树为修改的证明树；
5. 用修改证明树的根子句作为回答语句，则答案就在此根子句中。

> **实质:** 
把一棵根部有NIL的反演树变换为根部带有回答语句的一棵证明树。

### 规则演绎

#### 基本思想

1. 充分利用蕴涵式的优势
2. 直接使用规则的形式进行推理

#### 系统中包括两类信息

1. IF-THEN 规则
2. 事实(Facts)

#### 根据推理方向，可分为

1. 正向推理(正向链推理,Forward chaining)
2. 逆向推理(逆向链推理,Backward chaining)

### 正向推理

- 从if部分向then部分推理的过程
- 从事实或状况向目标或动作进行操作
- 事实驱动或数据驱动

    1. 事实被表示成与或形(AND/OR form)
    2. 仅含有合取(与)和析取(或)联接词

#### 正向推理步骤

1. 利用(W1→W2)和(～W1∨W2)的等价关系，消去符号→(实际上，在事实中间很少有符号→出现，因为可把蕴涵式表示为规则)。
2. 用德·摩根(De Morgan) 律把否定符号移进括号内，直到每个否定符号的辖域最多只含有一个谓词为止。
3. 对所得到的表达式进行Skolem化和前束化。
4. 对全称量词辖域内的变量进行改名和变量标准化。
5. 删去全称量词。
    > 目的：将事实转化为单文字集合

6. 目标G 转换为单文字集合
7. 将事实的单文字集合用与或树表示
8. 若包含有终止在目标节点上的一个解图，成功

### 后向推理

- 从目标到事实的操作过程
- 一直检查规则
- 目标驱动
- 目标以与或表达

#### 特点

1. 逆向系统中的事实表达式均限制为文字合取形
2. 当一个事实文字和标在该图文字节点上的文字相匹配时，就可把相应的后裔事实节点添加到该与或图中去。这个事实节点通过标有mgu的匹配弧与匹配的子目标文字节点连接起来。同一个事实文字可以多次重复使用(每次用不同变量)，以便建立多重事实节点。
3. 逆向系统成功的终止条件是与或图包含有某个终止在事实节点上的一致解图

## 产生式系统

### 定义：

用来描述若干个不同的以一个基本概念为基础的系统。这个基本概念就是产生式规则或产生式条件和操作对的概念。

### 实质：

在产生式系统中，论域的知识分为两部分：用事实表示静态知识，如事物、事件和它们之间的关系；用产生式规则表示推理过程和行为。由于这类系统的知识库主要用于存储规则，因此又把此类系统称为基于规则的系统

### 总数据库(Global Database )

又称综合数据库、上下文、黑板等
存放求解过程中各种当前信息的数据，如：问题的初始状态、事实或证据、中间推理结论和结果等。

### 产生式规则（规则库Rule base）

存放于求解问题相关的某个领域知识的规则集合
完整性、一致性、准确性、灵活性和合理性

### 控制策略（推理机Inference Engine ）

由一组程序组成，用来控制产生式系统的运行

### 选择规则到执行操作的步骤：

#### 1、匹配

把当前数据库与规则的条件部分相匹配。

#### 2、冲突

当有一条以上规则的条件部分和当前数据库相匹配时，就需要决定首先使用哪一条规则，这称为冲突解决。

#### 3、操作

执行规则的操作部分

### 推理策略

1. 正向推理：从一组表示事实的谓词或命题出发，使用一组产生式规则，用以证明该谓词公式或命题是否成立。
2. 逆向推理：从表示目标的谓词或命题出发，使用一组产生式规则证明事实谓词或命题成立，即首先提出一批假设目标，然后逐一验证这些假设。
3. 双向推理：双向推理的推理策略是同时从目标向事实推理和从事实向目标推理，并在推理过程中的某个步骤，实现事实与目标的匹配。

### 上面的都是单调推理

### 非单调推理

1. 非单调推理用来处理那些不适合用谓词逻辑表示的知识
2. 它能够较好地处理不完全信息、不断变化的情况以及求解复杂问题过程中生成的假设，具有较为有效的求解效率
3. 随着知识的增加，推出的结论或证明为真的命题并不单调的增多

**核心：在默认或假设某些命题成立的前提下进行推理**

一个既精确又可算的缺省推理的描述，必涉及结论Y且缺少某一信息X
定义1：如果X不知道，那么得结论Y。

定义2：如果X不能被证明，那么得结论Y。

定义3：如果X不能在某个给定的时间内被证明，那么得结论Y。

### 正确性维持系统

用以保持其它程序所产生的命题之间的相容性。一旦发现某个不相容，就调出自己的推理机制，面向从属关系的回溯，并通过修改最小的信念集来消除不相容。

### 限定推理

麦卡锡于1970s末提出

核心：如果一个句子叙述一个命题，那么它叙述的仅仅是这个命题，一点也不能扩展和延伸。而任何多余的东西都要去掉

### 时序推理

一种表示时间知识和进行时间区间推理的方法，能够处理事件间的时序关系。

不是建立在逻辑基础之上，消除了一阶逻辑的局限性，应用广泛。
